new entry "RAGE_TOTEM_BEAR"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_BEAR"
data "StackPriority" "2"
// Unlock Shout_FerociousAppetite:
data "Boosts" "Tag(VFX_RAGE);BlockSpellCast();UnlockSpell(Shout_FerociousAppetite);UnlockSpell(Shout_EndRage);Attribute(ForceMainhandAlternativeEquipBones);Resistance(Slashing, Resistant);Resistance(Piercing, Resistant);Resistance(Bludgeoning, Resistant);Resistance(Acid, Resistant);Resistance(Thunder, Resistant);Resistance(Necrotic, Resistant);Resistance(Fire, Resistant);Resistance(Lightning, Resistant);Resistance(Cold, Resistant);Resistance(Poison, Resistant);Resistance(Radiant, Resistant);Resistance(Force, Resistant);"
data "OnRemoveFunctors" "RemoveStatus(RAGE_TOTEM_BEAR_HEAL_TOGGLE);RemoveStatus(RAGE_MUTE);RemoveStatus(RAGE_STOP_REMOVE);RemoveStatus(RAGE_BEAR_NO_HEAVY_ARMOUR_VFX);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):ApplyStatus(RAGE_ENDED,100,1);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):UseSpell(Shout_EndRage,true,true,true)"

new entry "RAGE_TOTEM_EAGLE"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_EAGLE"
data "StackPriority" "2"
// Unlock Projectile_DivingStrike:
data "Boosts" "Tag(VFX_RAGE);BlockSpellCast();UnlockSpell(Projectile_DivingStrike);UnlockSpell(Shout_EndRage);Attribute(ForceMainhandAlternativeEquipBones);IF(IsReactionAttack(context.Source)):Disadvantage(AttackTarget);UnlockSpell(Shout_Dash_BonusAction);"
data "OnRemoveFunctors" "RemoveStatus(RAGE_MUTE);RemoveStatus(RAGE_STOP_REMOVE);RemoveStatus(RAGE_EAGLE_NO_HEAVY_ARMOUR_VFX);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):ApplyStatus(RAGE_ENDED,100,1);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):UseSpell(Shout_EndRage,true,true,true)"

new entry "RAGE_TOTEM_ELK"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_ELK"
data "StackPriority" "2"
// Unlock Rush_Primal_Stampede:
data "Boosts" "Tag(VFX_RAGE);BlockSpellCast();UnlockSpell(Rush_Primal_Stampede);UnlockSpell(Shout_EndRage);Attribute(ForceMainhandAlternativeEquipBones);ActionResource(Movement,4.5,0);"
data "OnRemoveFunctors" "RemoveStatus(RAGE_MUTE);RemoveStatus(RAGE_STOP_REMOVE);RemoveStatus(RAGE_ELK_NO_HEAVY_ARMOUR_VFX);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):ApplyStatus(RAGE_ENDED,100,1);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):UseSpell(Shout_EndRage,true,true,true)"

new entry "RAGE_TOTEM_TIGER"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_TIGER"
data "StackPriority" "2"
// Unlock Zone_TigersBloodlust:
data "Boosts" "Tag(VFX_RAGE);BlockSpellCast();UnlockSpell(Zone_TigersBloodlust);UnlockSpell(Shout_EndRage);Attribute(ForceMainhandAlternativeEquipBones);JumpMaxDistanceMultiplier(1.5)"
data "OnRemoveFunctors" "RemoveStatus(RAGE_MUTE);RemoveStatus(RAGE_STOP_REMOVE);RemoveStatus(RAGE_TIGER_NO_HEAVY_ARMOUR_VFX);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):ApplyStatus(RAGE_ENDED,100,1);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):UseSpell(Shout_EndRage,true,true,true)"

new entry "RAGE_TOTEM_WOLF"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_WOLF"
data "StackPriority" "2"
// Unlock Shout_PackHowl_Barbarian:
data "Boosts" "Tag(VFX_RAGE);BlockSpellCast();UnlockSpell(Shout_PackHowl_Barbarian);UnlockSpell(Shout_EndRage);Attribute(ForceMainhandAlternativeEquipBones);"
data "OnRemoveFunctors" "RemoveStatus(RAGE_MUTE);RemoveStatus(RAGE_STOP_REMOVE);RemoveStatus(RAGE_WOLF_NO_HEAVY_ARMOUR_VFX);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):ApplyStatus(RAGE_ENDED,100,1);IF(RemoveCause(StatusRemoveCause.TimeOut) or RemoveCause(StatusRemoveCause.Condition)):UseSpell(Shout_EndRage,true,true,true)"

// DEBUG:
new entry "RAGE_ENDED"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_ENDED"
data "FormatColor" "Orange"
data "TickType" "EndTurn"
data "StatusPropertyFlags" "ForceOverhead"

new entry "RAGE_TOTEM_BEAR_HEAL_TOGGLE"
type "StatusData"
data "StatusType" "BOOST"
using "RAGE_TOTEM_BEAR_HEAL_TOGGLE"
data "StatusPropertyFlags" ""